{% extends "base.html" %}

{% block title %}Pet Classification App - Home{% endblock %}

{% block content %}
<div class="card">
    <div class="upload-area">
        <h2>Image Upload Area</h2>
        <p>Drag and drop your image here or click to browse</p>
        
        <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" id="upload-form">
            <input type="file" name="file" id="file-input" accept="image/*" style="display: none;">
            <button type="button" id="browse-button" class="btn">Browse Files</button>
        </form>
        
        <div id="preview-container" style="display: none;">
            <img id="image-preview" src="#" alt="Preview">
            <button id="submit-button" class="btn">Classify Pet</button>
        </div>
    </div>
</div>

<div class="card">
    <div class="project-description">
        <h2>Project Description</h2>
        <p>
            Panther. Maine coon ocicat puma so jaguar. Turkish angora tiger bombay, cheetah, for balinese, and lynx. Tomcat thai or devonshire rex so bengal or thai. Lynx. Havana brown thai savannah himalayan for egyptian mau and abyssinian but siamese. Persian puma so thai, ragdoll kitty for siamese. Grimalkin panther or maine coon. Ocelot munchkin. Persian. Puma havana brown, or kitty for mouser for cornish rex or bombay lion. Cheetah siberian burmese or thai. Savannah singapura and singapura ragdoll manx. Cornish rex norwegian forest leopard lynx donskoy persian.
        </p>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const dropArea = document.querySelector('.upload-area');
        const fileInput = document.getElementById('file-input');
        const browseButton = document.getElementById('browse-button');
        const previewContainer = document.getElementById('preview-container');
        const imagePreview = document.getElementById('image-preview');
        const submitButton = document.getElementById('submit-button');
        const uploadForm = document.getElementById('upload-form');

        // Browse button functionality
        browseButton.addEventListener('click', function() {
            fileInput.click();
        });

        // File input change event
        fileInput.addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                displayPreview(file);
            }
        });

        // Drag and drop functionality
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });

        function highlight() {
            dropArea.classList.add('highlight');
        }

        function unhighlight() {
            dropArea.classList.remove('highlight');
        }

        // Handle dropped files
        dropArea.addEventListener('drop', function(e) {
            const file = e.dataTransfer.files[0];
            fileInput.files = e.dataTransfer.files;
            if (file) {
                displayPreview(file);
            }
        });

        // Display preview of selected image
        function displayPreview(file) {
            if (!file.type.match('image.*')) {
                alert('Please select an image file');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                imagePreview.setAttribute('src', e.target.result);
                previewContainer.style.display = 'block';
                browseButton.style.display = 'none';
            }
            reader.readAsDataURL(file);
        }

        // Submit button functionality
        submitButton.addEventListener('click', function() {
            uploadForm.submit();
        });
    });
</script>
{% endblock %}